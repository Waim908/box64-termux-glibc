### Auto build Box64 and release its binary with Github Action
name: Build and Release Box64

on: push

jobs:
  ubuntu:
    runs-on: ubuntu-latest
    steps:
      - name: update & install package
        run: |
          sudo apt update
          sudo apt install git patchelf gcc-aarch64-linux-gnu
      - name: git clone
        run: |
          git clone https://github.com/ptitSeb/box64
      - name: build
        run: |
          cd box64 && mkdir build && cd build && cmake .. -DCMAKE_INSTALL_PREFIX=$HOME/glibc -DARM64=ON -DARM_DYNAREC=ON -DBAD_SIGNAL=ON -DNOLOADADDR=ON -DCMAKE_BUILD_TYPE=Release
          make -j$(nproc)
          make insatll